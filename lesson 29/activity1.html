<html>

<head>
    <title>
        activity 1
    </title>
</head>

<body>
    <div class="container">

    
    <h1>
        weather app
    </h1>
    <div class="search-box">
        <input type="text" id="cityinput" placeholder="Enter Your City">
        <button onclick="getweather()">
            Search

        </button>

    </div>
    <div id="weatherresult">

    </div>
    </div>
    <script>
        const API_KEY = '50a84c8ff6f34c0db33180654251709';

        const API_URL = 'https://api.weatherapi.com/v1/current.json';
        function getweather() {
            const city = document.getElementById("cityinput").value.trim()
            const result = document.getElementById("weatherresult")
            if (!city) {
                result.innerHTML = '<div class="error">Please enter a city name!</div>'
                return
            }
            result.innerHTML = '<div class="loading">Loading...</div>';
            fetch(`${API_URL}?key=${API_KEY}&q=${city}&aqi=no`).then(response => {
                if (!response.ok) {
                    throw new Error("city not found")
                }
                return response.json()
            })
                .then(data => {
                    displayweather(data)
                })
                .catch(error => {
                    result.innerHTML = '<div class="error">City not found! Please try again.</div>'
                })




        }
        function displayweather(data) {
            const result = document.getElementById("weatherresult")
            const html = `

<div class="weather-info">

<div class="city">${data.location.name}, ${data.location.country}</div>

<div class="temp">${Math.round(data.current.temp_c)}°C</div>

<div class="desc">${data.current.condition.text}</div>

<div class="details">

<div class="detail">

<span>Feels like</span>

<strong>${Math.round(data.current.feelslike_c)}°C</strong>

</div>

<div class="detail">

<span>Humidity</span>

<strong>${data.current.humidity}%</strong>

</div>

<div class="detail">

<span>Wind</span>

<strong>${data.current.wind_kph} km/h</strong>

</div>

</div>

</div>

`;
            result.innerHTML = html
        }
        document.getElementById("cityinput").addEventListener("keypress", function (e) {
            if (e.key === "Enter") {
                getweather()
            }
        })
        window.addEventListener('load', function () {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function (position) {
                    const lat = position.coords.latitude
                    const lon = position.coords.longitude
                    fetch(`${API_URL}?key=${API_KEY}&q=${lat},${lon}&aqi=no`)
                        .then(response => response.json())
                        .then(data => {
                            displayweather(data)
                            document.getElementById("cityinput").value = data.location.name
                        })
                        .catch(error => {
                            console.log("could not get the weather of hte location")
                        })
                })
            }
        })
    </script>
    <style>
        * {

            margin: 0;

            padding: 0;

            box-sizing: border-box;

        }


        body {

            font-family: 'Arial', sans-serif;

            background: linear-gradient(180deg, #5a7794, #6c7227);

            min-height: 100vh;

            display: flex;

            align-items: center;

            justify-content: center;

            color: white;

        }


        .container {

            background: rgba(106, 161, 243, 0.1);

            backdrop-filter: blur(10px);

            border-radius: 20px;

            padding: 30px;

            text-align: center;

            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);

            max-width: 400px;

            width: 90%;

        }


        .search-box {

            margin-bottom: 50px;

        }


        input {

            background: rgba(255, 255, 255, 0.2);

            border: none;

            border-radius: 25px;

            padding: 12px 20px;

            font-size: 16px;

            color: white;

            width: 70%;

            margin-right: 10px;

            outline: none;

            margin-top: 15px;

        }

        input::placeholder {

            color: rgba(255, 255, 255, 0.7);

        }


        button {

            background: rgba(255, 255, 255, 0.3);

            border: none;

            border-radius: 25px;

            padding: 12px 20px;

            font-size: 16px;

            color: white;

            cursor: pointer;

            transition: all 0.3s ease;

            margin: 15px;

        }


        button:hover {

            background: rgba(255, 255, 255, 0.4);

            transform: translateY(-2px);

        }


        .weather-info {

            margin-top: 20px;

        }


        .city {

            font-size: 32px;

            margin-bottom: 10px;

        }


        .temp {

            font-size: 72px;

            font-weight: 300;

            margin: 20px 0;

        }


        .desc {

            font-size: 20px;

            text-transform: capitalize;

            margin-bottom: 20px;

        }


        .details {

            display: flex;

            justify-content: space-around;

            margin-top: 20px;

        }


        .detail {

            text-align: center;

        }


        .detail span {

            display: block;

            font-size: 14px;

            opacity: 0.8;

        }


        .detail strong {

            font-size: 18px;

        }


        .error {

            color: #ff6b6b;

            margin-top: 15px;

        }


        .loading {

            margin-top: 20px;

        }
    </style>

</body>

</html>